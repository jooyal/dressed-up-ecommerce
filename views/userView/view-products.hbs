<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.2.0/handlebars.js" integrity="sha512-+P5+Q4rnaJzPKAvlsCBSD45d9LWg9YJePSSyhZY1JfiJTQBkJZcSEl9qgsUCJsO5yw/82RK9rsAPcl0E+p1cIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    {{!-- Item added to cart popup --}}
    <div class="alert-added-to-cart">
      <div class="cart-alert-card">
        <lottie-player class="align-items-center" src="/lottieFiles/greentick.json" id="lottieAddToCart"  background="transparent"  speed=".9" style="width: 200px; height: 200px;"></lottie-player>
        <h3 class="text-warning text-center">Item Added To Cart<br/>Successfully!</h3>
      </div>
    </div>
    {{!-- End of the popup --}}

    {{!-- Item added to wishlist popup --}}
    <div class="alert-added-to-wishlist">
      <div class="wishlist-alert-card">
        <lottie-player class="align-items-center" src="/lottieFiles/added-to-wishlist.json" id="lottieAddToWishlist"  background="transparent"  speed="1.6" style="width: 200px; height: 200px;"></lottie-player>
        <h3 class="text-danger text-center">Successfully<br/>Added To Wishlist</h3>
      </div>
    </div>
    {{!-- End of the popup --}}


{{!-- Left Part --}}

<section id="product1" class=" d-flex">
    <div style=" position:fixed; z-index: 9; width:18%;">
            <div class="accordion" id="accordionExample">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                    Filter By Price
                </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                <div class="accordion-body ">
                    {{!-- <input style="width: 10px;" type="radio" name="category" id="men" value="men">
                    <label style="font-size: 14px;" for="men">MEN</label><br>
                    <input style="width: 10px;" type="radio" name="category" id="women" value="women">
                    <label style="font-size: 14px;" for="women">WOMEN</label><br>
                    <input style="width: 10px;" type="radio" name="category" id="kids" value="kids">
                    <label style="font-size: 14px;" for="kids">KIDS</label><br>
                    <input style="width: 10px;" type="radio" name="category" id="accessories" value="accessories">
                    <label style="font-size: 14px;" for="accessories">ACCESSORIES</label><br>
                    <input style="width: 10px;" type="radio" name="category" id="living" value="living">
                    <label style="font-size: 14px;" for="living">LIVING</label> --}}
 
                    <input class="mt-2" type="range" id="priceRangeForProducts" min="0" max="5000" oninput="labelDisplay()" value="5000" step="1000"><br>
                    Rs. 0 - Rs. <label for="priceRangeForProducts" id="labelForPriceRange">5000</label>
                </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    {{!-- Color --}}Type
                </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                <div class="accordion-body">

                    <div class="custom-control custom-radio mt-2">
                        <input id="allWearSelect" value="all" name="proTypeSelection" type="radio" class="custom-control-input" oninput="viewAllProducts()" checked>
                        <label class="custom-control-label" for="allWearSelect">All</label>
                    </div>
                    <div class="custom-control custom-radio mt-2">
                        <input id="topWearSelect" value="top" name="proTypeSelection" type="radio" class="custom-control-input" oninput="viewAllProducts()" >
                        <label class="custom-control-label" for="topWearSelect">Top Wear</label>
                    </div>
                    <div class="custom-control custom-radio mt-2">
                        <input id="bottomWearSelect" value="bottom" name="proTypeSelection" type="radio" class="custom-control-input" oninput="viewAllProducts()">
                        <label class="custom-control-label" for="bottomWearSelect">Bottom Wear</label>
                    </div>
                    <div class="custom-control custom-radio mt-2">
                        <input id="otherWearSelect" value="nosize" name="proTypeSelection" type="radio" class="custom-control-input" oninput="viewAllProducts()">
                        <label class="custom-control-label" for="otherWearSelect">Other</label>
                    </div>

                    {{!-- <input style="width: 10px;" type="checkbox" name="color" id="cblack" value="black">
                    <label style="font-size: 14px;" for="cblack">BLACK</label>
                    <canvas id="cblack" style="width: 12px; height: 12px; border-radius: 1px; border-width: 1px; border: solid; border-color: rgb(216, 216, 216); background-color: black;"></canvas>
                    <span>|</span>
                    <input style="width: 10px;" type="checkbox" name="color" id="cwhite" value="white">
                    <label style="font-size: 14px;" for="cwhite">WHITE</label>
                    <canvas id="cwhite" style="width: 12px; height: 12px; border-radius: 1px; border: solid; border-color: rgb(216, 216, 216); background-color: white;"></canvas>
                     <br>
                    <input style="width: 10px;" type="checkbox" name="color" id="cgreen" value="green">
                    <label style="font-size: 14px;" for="cgreen">GREEN</label>
                    <canvas id="cgreen" style="width: 12px; height: 12px; border-radius: 1px; border-width: 1px; border: solid; border-color: rgb(216, 216, 216); background-color: green;"></canvas>
                    <span>|</span>
                    <input style="width: 10px;" type="checkbox" name="color" id="cyellow" value="yellow">
                    <label style="font-size: 14px;" for="cyellow">YELLOW</label>
                    <canvas id="cyellow" style="width: 12px; height: 12px; border-radius: 1px; border-width: 1px; border: solid; border-color: rgb(216, 216, 216); background-color: yellow;"></canvas>
                     <br>
                    <input style="width: 10px;" type="checkbox" name="color" id="corange" value="orange">
                    <label style="font-size: 14px;" for="corange">ORANGE</label>
                    <canvas id="corange" style="width: 12px; height: 12px; border-radius: 1px; border-width: 1px; border: solid; border-color: rgb(216, 216, 216); background-color: orange;"></canvas>
                    <span>|</span>
                    <input style="width: 10px;" type="checkbox" name="color" id="cred" value="red">
                    <label style="font-size: 14px;" for="cred">RED</label>
                    <canvas id="cred" style="width: 12px; height: 12px; border-radius: 1px; border-width: 1px; border: solid; border-color: rgb(216, 216, 216); background-color: red;"></canvas>
                     <br>
                    <input style="width: 10px;" type="checkbox" name="color" id="cblue" value="blue">
                    <label style="font-size: 14px;" for="cblue">BLUE</label>
                    <canvas id="cblue" style="width: 12px; height: 12px; border-radius: 1px; border-width: 1px; border: solid; border-color: rgb(216, 216, 216); background-color: blue;"></canvas>
                    <span>|</span>
                    <input style="width: 10px;" type="checkbox" name="color" id="cpink" value="pink">
                    <label style="font-size: 14px;" for="cpink">PINK</label>
                    <canvas id="cpink" style="width: 12px; height: 12px; border-radius: 1px; border-width: 1px; border: solid; border-color: rgb(216, 216, 216); background-color: pink;"></canvas>
                     <br> --}}
                </div>
                </div>
            </div>
            {{!-- <div class="accordion-item">
                <h2 class="accordion-header" id="headingThree">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    Size
                </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <input style="width: 10px;" type="checkbox" name="size" id="small" value="small">
                    <label style="font-size: 14px;" for="small">S</label>|
                    <input style="width: 10px;" type="checkbox" name="size" id="medium" value="medium">
                    <label style="font-size: 14px;" for="medium">M</label>|
                    <input style="width: 10px;" type="checkbox" name="size" id="large" value="large">
                    <label style="font-size: 14px;" for="large">L</label>|
                    <input style="width: 10px;" type="checkbox" name="size" id="xlarge" value="xlarge">
                    <label style="font-size: 14px;" for="xlarge">XL</label>|<br>
                    <input style="width: 10px;" type="checkbox" name="size" id="xxlarge" value="xxlarge">
                    <label style="font-size: 14px;" for="xxlarge">XXL</label>|
                    <input style="width: 10px;" type="checkbox" name="size" id="32" value="32">
                    <label style="font-size: 14px;" for="32">32</label>|
                    <input style="width: 10px;" type="checkbox" name="size" id="34" value="34">
                    <label style="font-size: 14px;" for="34">34</label>|
                    <input style="width: 10px;" type="checkbox" name="size" id="36" value="36">
                    <label style="font-size: 14px;" for="36">36</label>|<br>
                    <input style="width: 10px;" type="checkbox" name="size" id="38" value="38">
                    <label style="font-size: 14px;" for="38">38</label>|
                    <input style="width: 10px;" type="checkbox" name="size" id="40" value="40">
                    <label style="font-size: 14px;" for="40">40</label>|
                    <input style="width: 10px;" type="checkbox" name="size" id="freestyle" value="freestyle">
                    <label style="font-size: 14px;" for="freestyle">freestyle</label>
                    
                </div>
                </div>
            </div> --}}
            </div>
    </div>

{{!-- Right Part --}}
    <input type="text" id="productCategoryForAllProductsView" value="{{category}}" hidden />
    <input type="text" id="selectedMaxPriceForAllProductsView" value="{{maximumPrice}}" hidden />
    <input type="text" id="selectedTypeForAllProductsView" value="{{selectedType}}" hidden />

        <div id="viewAllProductsContainer" style="position: relative; min-height: 100vh; margin-left: 20%; width: 80%;">
            <div class="pro-container">
            {{#each allProducts}}
            <div class="productsDivToRefresh" style="display: contents;">
            <div class="pro" style="padding-bottom: 70px;">
                <a class="product-card-link" href="/product-details/{{this._id}}">
                  <img src="/productImages/{{this.image1}}" alt="">
                </a>
                <div class="des">
                    <a style="text-decoration: none;" class="product-card-link" href="/product-details/{{this._id}}">
                      <span>{{this.productBrand}}</span>
                      <h5>{{this.productName}}</h5>
                    </a>
                    {{!-- <div class="star">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div> --}}
                    <div class="d-flex flex-row" style="position: absolute; bottom: 30px; ">
                    <h4>&#8377; {{this.productPrice}}</h4>
                    <button style="border: none; background-color: white; margin-left: 7em; padding-bottom: 10px; height: 20px;" onclick="addToWishlist('{{this._id}}')" id="iconInsideProCardLink" class="shopping-icon"><i class="fa-solid fa-heart" id="iconInsideProCard"></i></button>
                    <button style="border: none; background-color: white; margin-left: 2em; padding-bottom: 10px; height: 20px;" onclick="addToCart('{{this._id}}')" id="iconInsideProCardLink" class="shopping-icon" ><i class=" fa-sharp fa-solid fa-cart-shopping" id="iconInsideProCard"></i></button>
                    </div>
                </div>
            </div>
            </div>
            {{/each}}
            </div>
        </div>
</section>


<script>
    let labelDisplay = ()=>{
        let rangeLabel = document.getElementById('labelForPriceRange')
        let rangeInput = document.getElementById('priceRangeForProducts')

        rangeLabel.innerHTML = rangeInput.value

        viewAllProducts()
    }

    // to change the values in the radio and range once the view-product get request is called.

    let maxPriceForRange = document.getElementById('selectedMaxPriceForAllProductsView').value
    let rangeLabelEdit = document.getElementById('labelForPriceRange')
    let rangeInputEdit = document.getElementById('priceRangeForProducts')
    console.log(maxPriceForRange)
    if(maxPriceForRange == 1000){
        rangeLabelEdit.innerHTML = '1000'
        rangeInputEdit.value = 1000
    } else if(maxPriceForRange == 2000){
        rangeLabelEdit.innerHTML = '2000'
        rangeInputEdit.value = 2000
    } else if(maxPriceForRange == 3000){
        rangeLabelEdit.innerHTML = '3000'
        rangeInputEdit.value = 3000
    } else if(maxPriceForRange == 4000){
        rangeLabelEdit.innerHTML = '4000'
        rangeInputEdit.value = 4000
    } else if(maxPriceForRange == 5000){
        rangeLabelEdit.innerHTML = '5000'
        rangeInputEdit.value = 5000
    } else if(maxPriceForRange == '0'){
        rangeLabelEdit.innerHTML = '0'
        rangeInputEdit.value = 0
    }

    let selectedType = document.getElementById('selectedTypeForAllProductsView').value
    let allRadio = document.getElementById('allWearSelect')
    let topRadio = document.getElementById('topWearSelect')
    let bottomRadio = document.getElementById('bottomWearSelect')
    let otherRadio = document.getElementById('otherWearSelect')

    if(selectedType === 'all'){
        allRadio.checked = true
    } else if(selectedType === 'top'){
        topRadio.checked = true
    } else if(selectedType === 'bottom'){
        bottomRadio.checked = true
    } else if(selectedType === 'other'){
        otherRadio.checked = true
    } 

    //labelDisplay()
</script>
